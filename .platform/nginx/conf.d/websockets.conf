
location /socket.io/ {
    # The address of your Spring Boot application
    proxy_pass          http://127.0.0.1:5000;
    proxy_http_version  1.1;

    # These two headers are CRITICAL for the WebSocket upgrade handshake
    proxy_set_header    Upgrade $http_upgrade;
    proxy_set_header    Connection "upgrade";

    # Forward the real IP and host to your application
    proxy_set_header    Host $host;
    proxy_set_header    X-Real-IP $remote_addr;
    proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
}